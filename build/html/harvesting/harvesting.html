<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Harvesting configuration &mdash; DRDSI CKAN doc</title>
    
    <link rel="stylesheet" href="../_static/geosolutions.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '20140422',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="DRDSI CKAN doc" href="../index.html" />
    

  </head>
  <body>
    <div class="header">
        <div class="wrap">
			
            <div class="logo">
			<a href="http://geo-solutions.it/"><img src="../_static/img/geosolutions.png" alt="GeoSolutions" /></a>
			<div class="social-container"> 
				<ul id="social">
					<li><a href="https://plus.google.com/u/0/100131944378031878024/posts" id="gplus">Google+</a></li>
					<li><a href="http://twitter.com/geosolutions_it/" id="twitter">Twitter</a></li>
				</ul>
			</div>
			</div>
					
            <h2 class="docstitle"><a href="../index.html">DRDSI CKAN doc</a></h2>
			
        </div>
    </div>


      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Harvesting configuration</a><ul>
<li><a class="reference internal" href="#adding-an-harvesting-source">Adding an harvesting source</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/harvesting/harvesting.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="harvesting-configuration">
<span id="ckan-harvesting"></span><h1>Harvesting configuration<a class="headerlink" href="#harvesting-configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="adding-an-harvesting-source">
<h2>Adding an harvesting source<a class="headerlink" href="#adding-an-harvesting-source" title="Permalink to this headline">¶</a></h2>
<p>In order to add an harvesting source, you need to log into CKAN web interface as an administrator.
You have to type the address for the harvesting page, since there is no direct link for it</p>
<div class="highlight-python"><div class="highlight"><pre>http://YOUR_SITE/harvest
</pre></div>
</div>
<div class="figure align-center">
<img alt="../_images/harvest_add.png" src="../_images/harvest_add.png" />
</div>
<p>Press the &#8220;Add Harvest Source&#8221; button and this page will open:</p>
<div class="figure align-center">
<img alt="../_images/harvest_edit.png" src="../_images/harvest_edit.png" />
</div>
<p>In order to add properly a CSW source you&#8217;ll have to set:</p>
<ul class="simple">
<li>The CSW URL endpoint</li>
<li>A title/name for this source, for your reference</li>
<li>The harvest type, i.e. &#8220;CSW Server&#8221; in &#8220;Source type&#8221;</li>
<li>The update frequency</li>
<li>An optional configuration in JSON format.</li>
<li>The owner Organization: all the dataset harvested from this source will be assigned to that Organization.</li>
</ul>
<p>The JSON configuration allows these parameters:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">cql</span></tt>: a CQL filter for harvesting only a subset of the records in the remote node</li>
<li><tt class="docutils literal"><span class="pre">default_tags</span></tt>: all dataset harvested from this source will have these tags attached.</li>
<li><tt class="docutils literal"><span class="pre">default_extras</span></tt>: all dataset harvested from this source will have these key/value pairs attached.
The value may have tokens in the form <tt class="docutils literal"><span class="pre">{token}</span></tt>, where the allowed tokens are:<ul>
<li><tt class="docutils literal"><span class="pre">harvest_source_url</span></tt></li>
<li><tt class="docutils literal"><span class="pre">harvest_source_title</span></tt></li>
<li><tt class="docutils literal"><span class="pre">harvest_job_id</span></tt></li>
<li><tt class="docutils literal"><span class="pre">harvest_object_id</span></tt></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>cql filtering</em> has been added with <a class="reference external" href="https://github.com/ckan/ckanext-spatial/commit/55497f037e5add55f5890315e9c7c4f396cc49ac">this commit</a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><tt class="docutils literal"><span class="pre">default_tags</span></tt> and <tt class="docutils literal"><span class="pre">default_extras</span></tt> will be available only if, when installing ckanext-spatial, these commits
have been included manually:</p>
<div class="last highlight-python"><div class="highlight"><pre>https://github.com/ckan/ckanext-spatial/pull/58
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
            <li class="right" style="margin-right: 10px">
              <a href="../genindex.html" title="General Index"
                 accesskey="I">index</a></li>
        <li><a href="../index.html">doc</a> &raquo;</li>
        <li><a href="#">Harvesting configuration</a></li>
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2014 GeoSolutions.
      Last updated on Aug 03, 2015.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>