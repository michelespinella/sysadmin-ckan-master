<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Writing documentation &mdash; DRDSI CKAN doc</title>
    
    <link rel="stylesheet" href="../_static/geosolutions.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '20140422',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="DRDSI CKAN doc" href="../index.html" />
    

  </head>
  <body>
    <div class="header">
        <div class="wrap">
			
            <div class="logo">
			<a href="http://geo-solutions.it/"><img src="../_static/img/geosolutions.png" alt="GeoSolutions" /></a>
			<div class="social-container"> 
				<ul id="social">
					<li><a href="https://plus.google.com/u/0/100131944378031878024/posts" id="gplus">Google+</a></li>
					<li><a href="http://twitter.com/geosolutions_it/" id="twitter">Twitter</a></li>
				</ul>
			</div>
			</div>
					
            <h2 class="docstitle"><a href="../index.html">DRDSI CKAN doc</a></h2>
			
        </div>
    </div>


      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Writing documentation</a><ul>
<li><a class="reference internal" href="#getting-started">Getting started</a><ul>
<li><a class="reference internal" href="#install-ckan-into-a-virtualenv">Install CKAN into a virtualenv</a></li>
<li><a class="reference internal" href="#build-the-docs">Build the docs</a></li>
<li><a class="reference internal" href="#edit-the-restructuredtext-files">Edit the reStructuredText files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-the-docs-are-organized">How the docs are organized</a><ul>
<li><a class="reference internal" href="#subdirectories">Subdirectories</a></li>
<li><a class="reference internal" href="#linear-ordering">Linear ordering</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sphinx-tips">Sphinx</a><ul>
<li><a class="reference internal" href="#don-t-introduce-any-new-sphinx-warnings">Don&#8217;t introduce any new Sphinx warnings</a></li>
<li><a class="reference internal" href="#maximum-line-length">Maximum line length</a></li>
<li><a class="reference internal" href="#versionadded-and-versionchanged">versionadded and versionchanged</a></li>
<li><a class="reference internal" href="#cross-references-and-links">Cross-references and links</a><ul>
<li><a class="reference internal" href="#cross-referencing-to-another-file">Cross-referencing to another file</a></li>
<li><a class="reference internal" href="#cross-referencing-a-section-within-a-file">Cross-referencing a section within a file</a></li>
<li><a class="reference internal" href="#cross-referencing-to-ckan-config-settings">Cross-referencing to CKAN config settings</a></li>
<li><a class="reference internal" href="#cross-referencing-to-a-python-object">Cross-referencing to a Python object</a></li>
<li><a class="reference internal" href="#changing-the-link-text-of-a-cross-reference">Changing the link text of a cross-reference</a></li>
<li><a class="reference internal" href="#cross-referencing-to-an-external-page">Cross-referencing to an external page</a></li>
</ul>
</li>
<li><a class="reference internal" href="#substitutions">Substitutions</a></li>
<li><a class="reference internal" href="#parsed-literals">Parsed literals</a></li>
<li><a class="reference internal" href="#autodoc">autodoc</a></li>
<li><a class="reference internal" href="#todo">todo</a></li>
<li><a class="reference internal" href="#deprecated">deprecated</a></li>
<li><a class="reference internal" href="#seealso">seealso</a></li>
</ul>
</li>
<li><a class="reference internal" href="#code-examples">Code examples</a></li>
<li><a class="reference internal" href="#style">Style</a><ul>
<li><a class="reference internal" href="#use-american-spelling">Use American spelling</a></li>
<li><a class="reference internal" href="#spellcheck">Spellcheck</a></li>
<li><a class="reference internal" href="#commonly-used-terms">Commonly used terms</a></li>
<li><a class="reference internal" href="#section-titles">Section titles</a></li>
<li><a class="reference internal" href="#be-conversational">Be conversational</a></li>
<li><a class="reference internal" href="#write-clearly-and-concretely-not-vaguely-and-abstractly">Write clearly and concretely, not vaguely and abstractly</a></li>
<li><a class="reference internal" href="#facilitate-skimming">Facilitate skimming</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/contributing/documentation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="writing-documentation">
<h1>Writing documentation<a class="headerlink" href="#writing-documentation" title="Permalink to this headline">¶</a></h1>
<p>This section gives some guidelines to help us to write consistent and good
quality documentation for CKAN.</p>
<p>Documentation isn&#8217;t source code, and documentation standards don&#8217;t need to be
followed as rigidly as coding standards do. In the end, some documentation is
better than no documentation, it can always be improved later. So the
guidelines below are soft rules.</p>
<p>Having said that, we suggest just one hard rule: <strong>no new feature (or change to
an existing feature) should be missing from the docs</strong> (but see <a class="reference internal" href="#todo">todo</a>).</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt>Jacob Kaplan-Moss&#8217;s <a class="reference external" href="http://jacobian.org/writing/great-documentation/">Writing Great Documentation</a></dt>
<dd>A series of blog posts about writing technical docs, a lot of our
guidelines were based on this.</dd>
</dl>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p>The quickest and easiest way to contribute documentation to CKAN is to sign up
for a free GitHub account and simply edit the <a class="reference external" href="https://github.com/ckan/ckan/wiki">CKAN Wiki</a>.
Docs started on the wiki can make it onto <a class="reference external" href="http://docs.ckan.org">docs.ckan.org</a> later.
If you do want to contribute to <a class="reference external" href="http://docs.ckan.org">docs.ckan.org</a> directly, follow the
instructions on this page.</p>
<p class="last"><strong>Tip</strong>: Use the reStructuredText markup format when creating a wiki page,
since reStructuredText is the format that docs.ckan.org uses, this will make
moving the documentation from the wiki into docs.ckan.org later easier.</p>
</div>
<div class="section" id="getting-started">
<span id="id1"></span><h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>This section will walk you through downloading the source files for CKAN&#8217;s
docs, editing them, and submitting your work to the CKAN project.</p>
<p>CKAN&#8217;s documentation is created using <a class="reference external" href="http://sphinx-doc.org/">Sphinx</a>,
which in turn uses <a class="reference external" href="http://docutils.sourceforge.net/">Docutils</a>
(reStructuredText is part of Docutils). Some useful links to bookmark:</p>
<ul class="simple">
<li><a class="reference external" href="http://sphinx-doc.org/rest.html">Sphinx&#8217;s reStructuredText Primer</a></li>
<li><a class="reference external" href="http://docutils.sourceforge.net/docs/user/rst/cheatsheet.txt">reStructuredText cheat sheet</a></li>
<li><a class="reference external" href="http://docutils.sourceforge.net/docs/user/rst/quickref.html">reStructuredText quick reference</a></li>
<li><a class="reference external" href="http://sphinx-doc.org/markup/index.html">Sphinx Markup Constructs</a>
is a full list of the markup that Sphinx adds on top of Docutils.</li>
</ul>
<p>The source files for the docs are in <a class="reference external" href="https://github.com/ckan/ckan/tree/master/doc">the doc directory of the CKAN git repo</a>.
The following sections will walk you through the process of making changes to
these source files, and submitting your work to the CKAN project.</p>
<div class="section" id="install-ckan-into-a-virtualenv">
<h3>Install CKAN into a virtualenv<a class="headerlink" href="#install-ckan-into-a-virtualenv" title="Permalink to this headline">¶</a></h3>
<p>Create a <a class="reference external" href="http://pypi.python.org/pypi/virtualenv">Python virtual environment</a>
(virtualenv), activate it, install CKAN into the virtual environment, and
install the dependencies necessary for building CKAN. In this example we&#8217;ll
create a virtualenv in a folder called <tt class="docutils literal"><span class="pre">pyenv</span></tt>. Run these commands in a
terminal:</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.1: </span>In CKAN 2.0 and earlier the requirements file was called
<tt class="docutils literal"><span class="pre">pip-requirements-docs.txt</span></tt>, not <tt class="docutils literal"><span class="pre">dev-requirements.txt</span></tt> as below.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre>virtualenv --no-site-packages pyenv
. pyenv/bin/activate
pip install -e &#39;git+https://github.com/ckan/ckan.git#egg=ckan&#39;
cd pyenv/src/ckan/
pip install -r dev-requirements.txt
pip install -r requirements.txt
</pre></div>
</div>
</div>
<div class="section" id="build-the-docs">
<h3>Build the docs<a class="headerlink" href="#build-the-docs" title="Permalink to this headline">¶</a></h3>
<p>You should now be able to build the CKAN documentation locally. Make sure your
virtual environment is activated, and then run this command:</p>
<div class="highlight-python"><div class="highlight"><pre>python setup.py build_sphinx
</pre></div>
</div>
<p>Now you can open the built HTML files in
<tt class="docutils literal"><span class="pre">build/sphinx/html</span></tt>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre>firefox build/sphinx/html/index.html
</pre></div>
</div>
</div>
<div class="section" id="edit-the-restructuredtext-files">
<h3>Edit the reStructuredText files<a class="headerlink" href="#edit-the-restructuredtext-files" title="Permalink to this headline">¶</a></h3>
<p>To make changes to the documentation, use a text editor to edit the <tt class="docutils literal"><span class="pre">.rst</span></tt>
files in <tt class="docutils literal"><span class="pre">doc/</span></tt>. Save your changes and then build the docs
again (<tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">build_sphinx</span></tt>) and open the HTML files in a web
browser to preview your changes.</p>
<p>Once your docs are ready to submit to the CKAN project, follow the steps in
<a class="reference internal" href="pull-requests.html"><em>Making a pull request</em></a>.</p>
</div>
</div>
<div class="section" id="how-the-docs-are-organized">
<span id="structure"></span><h2>How the docs are organized<a class="headerlink" href="#how-the-docs-are-organized" title="Permalink to this headline">¶</a></h2>
<p>It&#8217;s important that the docs have a clear, simple and extendable structure
(and that we keep it that way as we add to them), so that both readers
and writers can easily answer the questions:
If you need to find the docs for a particular feature, where do you look?
If you need to add a new page to the docs, where should it go?</p>
<p>As <a class="reference internal" href="../index.html"><em>C-READ CKAN Project</em></a> explains, the documentation is organized into several guides,
each for a different audience: a user guide for web interface users, an
extending guide for extension developers, a contributing guide for core
contributors, etc. These guides are ordered with the simplest guides first,
and the most advanced last.</p>
<p>In the source, each one of these guides is a subdirectory with its own
<tt class="docutils literal"><span class="pre">index.rst</span></tt> containing its own <tt class="docutils literal"><span class="pre">..</span> <span class="pre">toctree::</span></tt> directive that lists all of
the other files in that subdirectory. The root toctree just lists each of these
<tt class="docutils literal"><span class="pre">*/index.rst</span></tt> files.</p>
<p>When adding a new page to the docs, the first question to ask yourself is: who
is this page for? That should tell you which subdirectory to put your page in.
You then need to add your page to that subdirectory&#8217;s <tt class="docutils literal"><span class="pre">index.rst</span></tt> file.</p>
<p>Within each guide, the docs are broken up by topic. For example, the extending
guide has a page for the writing extensions tutorial, a page about testing
extensions, a page for the plugins toolkit reference, etc. Again, the topics
are ordered with the simplest first and the most advanced last, and reference
pages generally at the very end.</p>
<p><tt class="xref doc docutils literal"><span class="pre">The</span> <span class="pre">changelog</span></tt> is one page that doesn&#8217;t fit into any of
the guides, because it&#8217;s relevant to all of the different audiences and not
only to one particular guide. So the changelog is simply a top-level page
on its own. Hopefully we won&#8217;t need to add many more of these top-level
pages. If you&#8217;re thinking about adding a page that serves two or more audiences
at once, ask yourself whether you can break that up into separate pages and
put each into one of the guides, then link them together using <a class="reference internal" href="#seealso">seealso</a>
boxes.</p>
<p>Within a particular page, for example a new page documenting a new feature, our
suggestion for what sections the page might have is:</p>
<ol class="arabic">
<li><p class="first"><strong>Overview</strong>: a conceptual overview of or introduction to the feature.
Explain what the feature provides, why someone might want to use it,
and introduce any key concepts users need to understand.
This is the <strong>why</strong> of the feature.</p>
<p>If it&#8217;s developer documentation (extension writing, theming, API, or
core developer docs), maybe put an architecture guide here.</p>
</li>
<li><p class="first"><strong>Tutorials</strong>: tutorials and examples for how to setup the feature,
and how to use the feature. This is the <strong>how</strong>.</p>
</li>
<li><p class="first"><strong>Reference</strong>: any reference docs such as config options or API functions.</p>
</li>
<li><p class="first"><strong>Troubleshooting</strong>: common error messages and problems, FAQs, how to
diagnose problems.</p>
</li>
</ol>
<div class="section" id="subdirectories">
<h3>Subdirectories<a class="headerlink" href="#subdirectories" title="Permalink to this headline">¶</a></h3>
<p>Some of the guides have subdirectories within them. For example
<a class="reference internal" href="../maintaining/index.html"><em>Maintainer&#8217;s guide</em></a> contains a subdirectory
<a class="reference internal" href="../maintaining/installing/index.html"><em>Installing CKAN</em></a>
that collects together the various pages about installing CKAN with its own
<tt class="docutils literal"><span class="pre">doc/maintaining/installing/index.rst</span></tt> file.</p>
<p>While subdirectories are useful, we recommend that you <strong>don&#8217;t put further
subdirectories inside the subdirectories</strong>, try to keep it to at most two
levels of subdirectories inside the <tt class="docutils literal"><span class="pre">doc</span></tt> directory. Keep it simple,
otherwise the structure becomes confusing, difficult to get an overview of and
difficult to navigate.</p>
</div>
<div class="section" id="linear-ordering">
<h3>Linear ordering<a class="headerlink" href="#linear-ordering" title="Permalink to this headline">¶</a></h3>
<p>Keep in mind that Sphinx requires the docs to have a simple, linear ordering.
With HTML pages it&#8217;s possible to design structure where, for example, someone
reads half of a page, then clicks on a link in the middle of the page to go
and read another page, then goes back to the middle of the first page and
continues reading where they left off. While technically you can do this in
Sphinx as well, it isn&#8217;t a good idea, things like the navigation links, table
of contents, and PDF version will break, users will end up going in circles,
and the structure becomes confusing.</p>
<p>So the pages of our Sphinx docs need to have a simple linear ordering - one
page follows another, like in a book.</p>
</div>
</div>
<div class="section" id="sphinx-tips">
<span id="id2"></span><h2>Sphinx<a class="headerlink" href="#sphinx-tips" title="Permalink to this headline">¶</a></h2>
<p>This section gives some useful tips about using Sphinx.</p>
<div class="section" id="don-t-introduce-any-new-sphinx-warnings">
<h3>Don&#8217;t introduce any new Sphinx warnings<a class="headerlink" href="#don-t-introduce-any-new-sphinx-warnings" title="Permalink to this headline">¶</a></h3>
<p>When you build the docs, Sphinx prints out warnings about any broken
cross-references, syntax errors, etc. We aim not to have any of these warnings,
so when adding to or editing the docs make sure your changes don&#8217;t introduce
any new ones.</p>
<p>It&#8217;s best to delete the <tt class="docutils literal"><span class="pre">build</span></tt> directory and completely rebuild the docs, to
check for any warnings:</p>
<div class="highlight-python"><div class="highlight"><pre>rm -rf build; python setup.py build_sphinx
</pre></div>
</div>
</div>
<div class="section" id="maximum-line-length">
<h3>Maximum line length<a class="headerlink" href="#maximum-line-length" title="Permalink to this headline">¶</a></h3>
<p>As with Python code, try to limit all lines to a maximum of 79 characters.</p>
</div>
<div class="section" id="versionadded-and-versionchanged">
<h3>versionadded and versionchanged<a class="headerlink" href="#versionadded-and-versionchanged" title="Permalink to this headline">¶</a></h3>
<p>Use Sphinx&#8217;s <tt class="docutils literal"><span class="pre">versionadded</span></tt> and <tt class="docutils literal"><span class="pre">versionchanged</span></tt> directives to mark new or
changed features. For example:</p>
<div class="highlight-python"><div class="highlight"><pre>================
Tag vocabularies
================

.. versionadded:: 1.7

CKAN sites can have *tag vocabularies*, which are a way of grouping related
tags together into custom fields.

...
</pre></div>
</div>
<p>With <tt class="docutils literal"><span class="pre">versionchanged</span></tt> you usually need to add a sentence explaining what
changed (you can also do this with <tt class="docutils literal"><span class="pre">versionadded</span></tt> if you want):</p>
<div class="highlight-python"><div class="highlight"><pre>=============
Authorization
=============

.. versionchanged:: 2.0
   Previous versions of CKAN used a different authorization system.

CKAN&#39;s authorization system controls which users are allowed to carry out
which...
</pre></div>
</div>
</div>
<div class="section" id="cross-references-and-links">
<h3>Cross-references and links<a class="headerlink" href="#cross-references-and-links" title="Permalink to this headline">¶</a></h3>
<p>Whenever mentioning another page or section in the docs, an external website, a
configuration setting, or a class, exception or function, etc. try to
cross-reference it. Using proper Sphinx cross-references is better than just
typing things like &#8220;see above/below&#8221; or &#8220;see section foo&#8221; because Sphinx
cross-refs are hyperlinked, and because if the thing you&#8217;re referencing to gets
moved or deleted Sphinx will update the cross-reference or print a warning.</p>
<div class="section" id="cross-referencing-to-another-file">
<h4>Cross-referencing to another file<a class="headerlink" href="#cross-referencing-to-another-file" title="Permalink to this headline">¶</a></h4>
<p>Use <tt class="docutils literal"><span class="pre">:doc:</span></tt> to cross-reference to other files by filename:</p>
<div class="highlight-python"><div class="highlight"><pre>See :doc:`configuration`
</pre></div>
</div>
<p>If the file you&#8217;re editing is in a subdir within the <tt class="docutils literal"><span class="pre">doc</span></tt> dir, you may need
to use an absolute reference (starting with a <tt class="docutils literal"><span class="pre">/</span></tt>):</p>
<div class="highlight-python"><div class="highlight"><pre>See :doc:`/configuration`
</pre></div>
</div>
<p>See <a class="reference external" href="http://sphinx-doc.org/markup/inline.html#cross-referencing-documents">Cross-referencing documents</a>
for details.</p>
</div>
<div class="section" id="cross-referencing-a-section-within-a-file">
<h4>Cross-referencing a section within a file<a class="headerlink" href="#cross-referencing-a-section-within-a-file" title="Permalink to this headline">¶</a></h4>
<p>Use <tt class="docutils literal"><span class="pre">:ref:</span></tt> to cross-reference to particular sections within the same or
another file. First you have to add a label before the section you want to
cross-reference to:</p>
<div class="highlight-python"><div class="highlight"><pre>.. _getting-started:

---------------
Getting started
---------------
</pre></div>
</div>
<p>then from elsewhere cross-reference to the section like this:</p>
<div class="highlight-python"><div class="highlight"><pre>See :ref:`getting-started`.
</pre></div>
</div>
<p>see <a class="reference external" href="http://sphinx-doc.org/markup/inline.html#cross-referencing-arbitrary-locations">Cross-referencing arbitrary locations</a>.</p>
</div>
<div class="section" id="cross-referencing-to-ckan-config-settings">
<h4>Cross-referencing to CKAN config settings<a class="headerlink" href="#cross-referencing-to-ckan-config-settings" title="Permalink to this headline">¶</a></h4>
<p>Whenever you mention a CKAN config setting, make it link to the docs for that
setting in <a class="reference internal" href="../maintaining/configuration.html"><em>Configuration Options</em></a> by using <tt class="docutils literal"><span class="pre">:ref:</span></tt> and the name of the config
setting:</p>
<div class="highlight-python"><div class="highlight"><pre>:ref:`ckan.site_title`
</pre></div>
</div>
<p>This works because all CKAN config settings are documented in
<a class="reference internal" href="../maintaining/configuration.html"><em>Configuration Options</em></a>, and every setting has a Sphinx label that is exactly
the same as the name of the setting, for example:</p>
<div class="highlight-python"><div class="highlight"><pre>.. _ckan.site_title:

ckan.site_title
^^^^^^^^^^^^^^^

Example::

ckan.site_title = Open Data Scotland

Default value:  ``CKAN``

This sets the name of the site, as displayed in the CKAN web interface.
</pre></div>
</div>
<p>If you add a new config setting to CKAN, make sure to document like this it in
<a class="reference internal" href="../maintaining/configuration.html"><em>Configuration Options</em></a>.</p>
</div>
<div class="section" id="cross-referencing-to-a-python-object">
<h4>Cross-referencing to a Python object<a class="headerlink" href="#cross-referencing-to-a-python-object" title="Permalink to this headline">¶</a></h4>
<p>Whenever you mention a Python function, method, object, class, exception, etc.
cross-reference it using a Sphinx domain object cross-reference.
See <a class="reference internal" href="python.html#referencing-other-code-objects"><em>Referencing other code objects with :py:</em></a>.</p>
</div>
<div class="section" id="changing-the-link-text-of-a-cross-reference">
<h4>Changing the link text of a cross-reference<a class="headerlink" href="#changing-the-link-text-of-a-cross-reference" title="Permalink to this headline">¶</a></h4>
<p>With <tt class="docutils literal"><span class="pre">:doc:</span></tt> <tt class="docutils literal"><span class="pre">:ref:</span></tt> and other kinds of link, if you want the link text to
be different from the title of the thing you&#8217;re referencing, do this:</p>
<div class="highlight-python"><div class="highlight"><pre>:doc:`the theming document &lt;/theming&gt;`

:ref:`the getting started section &lt;getting-started&gt;`
</pre></div>
</div>
</div>
<div class="section" id="cross-referencing-to-an-external-page">
<h4>Cross-referencing to an external page<a class="headerlink" href="#cross-referencing-to-an-external-page" title="Permalink to this headline">¶</a></h4>
<p>The syntax for linking to external URLs is slightly different from
cross-referencing, you have to add a trailing underscore:</p>
<div class="highlight-python"><div class="highlight"><pre>`Link text &lt;http://example.com/&gt;`_
</pre></div>
</div>
<p>or to define a URL once and then link to it in multiple places, do:</p>
<div class="highlight-python"><div class="highlight"><pre>This is `a link`_ and this is `a link`_ and this is
`another link &lt;a link&gt;`_.

.. _a link: http://example.com/
</pre></div>
</div>
<p>see <a class="reference external" href="http://sphinx-doc.org/rest.html#hyperlinks">Hyperlinks</a> for details.</p>
</div>
</div>
<div class="section" id="substitutions">
<span id="sphinx-substitutions"></span><h3>Substitutions<a class="headerlink" href="#substitutions" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://sphinx-doc.org/rest.html#substitutions">Substitutions</a> are a useful
way to define a value that&#8217;s needed in many places (eg. a command, the location
of a file, etc.) in one place and then reuse it many times.</p>
<p>You define the value once like this:</p>
<div class="highlight-python"><div class="highlight"><pre>.. |production.ini| replace:: /etc/ckan/default/production.ini
</pre></div>
</div>
<p>and then reuse it like this:</p>
<div class="highlight-python"><div class="highlight"><pre>Now open your |production.ini| file.
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">|production.ini|</span></tt> will be replaced with the full value
<tt class="docutils literal"><span class="pre">/etc/ckan/default/production.ini</span></tt>.</p>
<p>Substitutions can also be useful for achieving consistent spelling and
capitalization of names like <a href="#id9"><span class="problematic" id="id10">|restructuredtext|</span></a>, <a href="#id11"><span class="problematic" id="id12">|postgres|</span></a>, <a href="#id13"><span class="problematic" id="id14">|nginx|</span></a>, etc.</p>
<p>The <tt class="docutils literal"><span class="pre">rst_epilog</span></tt> setting in <tt class="docutils literal"><span class="pre">doc/conf.py</span></tt> contains a list of global
substitutions that can be used from any file.</p>
<p>Substitutions can&#8217;t immediately follow certain characters (with no space
in-between) or the substitution won&#8217;t work. If this is a problem, you can
insert an escaped space, the space won&#8217;t show up in the generated output and
the substitution will work:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install -e &#39;git+\ |git_url|&#39;
</pre></div>
</div>
<p>Similarly, certain characters are not allowed to immediately follow a
substitution (without a space) or the substitution won&#8217;t work. In this case you
can just escape the following characters, the escaped character will show up in
the output and the substitution will work:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install -e &#39;git+\ |git_url|\#egg=ckan&#39;
</pre></div>
</div>
<p>Also see <a class="reference internal" href="#parsed-literals"><em>Parsed literals</em></a> below for using substitutions in code blocks.</p>
</div>
<div class="section" id="parsed-literals">
<span id="id4"></span><h3>Parsed literals<a class="headerlink" href="#parsed-literals" title="Permalink to this headline">¶</a></h3>
<p>Normally things like links and substitutions don&#8217;t work within a literal code
block. You can make them work by using a <tt class="docutils literal"><span class="pre">parsed-literal</span></tt> block, for
example:</p>
<div class="highlight-python"><div class="highlight"><pre>Copy your development.ini file to create a new production.ini file::

.. parsed-literal::

   cp |development.ini| |production.ini|
</pre></div>
</div>
</div>
<div class="section" id="autodoc">
<h3>autodoc<a class="headerlink" href="#autodoc" title="Permalink to this headline">¶</a></h3>
<p>We try to use <a class="reference external" href="http://sphinx-doc.org/ext/autodoc.html">autodoc</a> to pull documentation from source code docstrings into
our Sphinx docs, wherever appropriate. This helps to avoid duplicating
documentation and also to keep the documentation closer to the code and
therefore more likely to be kept up to date.</p>
<p>Whenever you&#8217;re writing reference documentation for modules, classes, functions
or methods, exceptions, attributes, etc. you should probably be using autodoc.
For example, we use autodoc for the <a class="reference internal" href="../api/index.html#api-reference"><em>Action API reference</em></a>, the
<a class="reference internal" href="../extensions/plugin-interfaces.html"><em>Plugin interfaces reference</em></a>, etc.</p>
<p>For how to write docstrings, see <a class="reference internal" href="python.html#docstrings"><em>Docstrings</em></a>.</p>
</div>
<div class="section" id="todo">
<span id="id6"></span><h3>todo<a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h3>
<p>No new feature (or change to an existing feature) should be missing from the
docs. It&#8217;s best to document new features or changes as you implement them,
but if you really need to merge something without docs then at least add a
<a class="reference external" href="http://sphinx-doc.org/ext/todo.html">todo directive</a> to mark where docs
need to be added or updated (if it&#8217;s a new feature, make a new page or section
just to contain the <tt class="docutils literal"><span class="pre">todo</span></tt>):</p>
<div class="highlight-python"><div class="highlight"><pre>=====================================
CKAN&#39;s builtin social network feature
=====================================

.. todo::

   Add docs for CKAN&#39;s builtin social network for data hackers.
</pre></div>
</div>
</div>
<div class="section" id="deprecated">
<h3>deprecated<a class="headerlink" href="#deprecated" title="Permalink to this headline">¶</a></h3>
<p>Use Sphinx&#8217;s <a class="reference external" href="http://sphinx-doc.org/markup/para.html#directive-deprecated">deprecated directive</a>
to mark things as deprecated in the docs:</p>
<div class="highlight-python"><div class="highlight"><pre>.. deprecated:: 3.1
   Use :func:`spam` instead.
</pre></div>
</div>
</div>
<div class="section" id="seealso">
<h3>seealso<a class="headerlink" href="#seealso" title="Permalink to this headline">¶</a></h3>
<p>Often one page of the docs is related to other pages of the docs or to external
pages. A <a class="reference external" href="http://sphinx-doc.org/markup/para.html?highlight=seealso#directive-seealso">seealso block</a>
is a nice way to include a list of related links:</p>
<div class="highlight-python"><div class="highlight"><pre>.. seealso::

   :doc:`The DataStore extension &lt;datastore&gt;`
     A CKAN extension for storing data.

   CKAN&#39;s `demo site &lt;http://demo.ckan.org/&gt;`_
     A demo site running the latest CKAN beta version.
</pre></div>
</div>
<p>Seealso boxes are particularly useful when two pages are related, but don&#8217;t
belong next to each other in the same section of the docs. For example, we have
docs about how to upgrade CKAN, these belong in the maintainer&#8217;s guide because
they&#8217;re for maintainers. We also have docs about how to do a new release, these
belong in the contributing guide because they&#8217;re for developers. But both
sections are about CKAN releases, so we link each to the other using seealso
boxes.</p>
</div>
</div>
<div class="section" id="code-examples">
<h2>Code examples<a class="headerlink" href="#code-examples" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;re going to paste example code into the docs, or add a tutorial about
how to do something with code, then:</p>
<ol class="arabic simple">
<li>The code should be in standalone Python, HTML, JavaScript etc. files,
not pasted directly into the <tt class="docutils literal"><span class="pre">.rst</span></tt> files.
You then pull the code into your <tt class="docutils literal"><span class="pre">.rst</span></tt> file using a Sphinx
<tt class="docutils literal"><span class="pre">..</span> <span class="pre">literalinclude::</span></tt> directive (see example below).</li>
<li>The code in the standalone files should be a complete working example,
with tests.
Note that not all of the code from the example needs to appear in the docs,
you can include just parts of it using <tt class="docutils literal"><span class="pre">..</span> <span class="pre">literalinclude::</span></tt>, but the
example code needs to be complete so it can be tested.</li>
</ol>
<p>This is so that we don&#8217;t end up with a lot of broken, outdated examples and
tutorials in the docs because breaking changes have been made to CKAN since the
docs were written. If your example code has tests, then when someone makes a
change in CKAN that breaks your example those tests will fail, and they&#8217;ll know
they have to fix their code or update your example.</p>
<p>The <a class="reference internal" href="../extensions/tutorial.html"><em>plugins tutorial</em></a> is an example of this
technique. <a class="reference external" href="https://github.com/ckan/ckan/tree/master/ckanext/example_iauthfunctions">ckanext/example_iauthfunctions</a>
is a complete and working example extension. The tests for the extension are
in <a class="reference external" href="https://github.com/ckan/ckan/tree/master/ckanext/example_iauthfunctions/tests">ckanext/example_iauthfunctions/tests</a>.
Different parts of the <a href="#id15"><span class="problematic" id="id16">|reStructuredtext|</span></a> file for the tutorial pull in
different parts of the example code as needed, like this:</p>
<div class="highlight-rest"><div class="highlight"><pre><span class="p">..</span> <span class="ow">literalinclude</span><span class="p">::</span> ../../ckanext/example_iauthfunctions/plugin_v3.py
   <span class="nc">:start-after:</span> <span class="nf"># We have the logged-in user&#39;s user name, get their user id.</span>
   <span class="nc">:end-before:</span> <span class="nf"># Finally, we can test whether the user is a member of the curators group.</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">literalinclude</span></tt> has a few useful options for pulling out just the part of
the code that you want. See the <a class="reference external" href="http://sphinx-doc.org/markup/code.html?highlight=literalinclude#directive-literalinclude">Sphinx docs for literalinclude</a>
for details.</p>
<p>You may notice that <a class="reference external" href="https://github.com/ckan/ckan/tree/master/ckanext/example_iauthfunctions">ckanext/example_iauthfunctions</a>
contains multiple versions of the same example plugin, <tt class="docutils literal"><span class="pre">plugin_v1.py</span></tt>,
<tt class="docutils literal"><span class="pre">plugin_v2.py</span></tt>, etc. This is because the tutorial walks the user through
first making a trivial plugin, and then adding more and more advanced features
one by one. Each step of the tutorial needs to have its own complete,
standalone example plugin with its own tests.</p>
<p>For more examples, look into the source files for other tutorials in the docs.</p>
</div>
<div class="section" id="style">
<span id="id8"></span><h2>Style<a class="headerlink" href="#style" title="Permalink to this headline">¶</a></h2>
<p>This section covers things like what tone to use, how to capitalize section
titles, etc.  Having a consistent style will make the docs nice and easy to
read and give them a complete, quality feel.</p>
<div class="section" id="use-american-spelling">
<h3>Use American spelling<a class="headerlink" href="#use-american-spelling" title="Permalink to this headline">¶</a></h3>
<p>Use American spellings everywhere: organization, authorization, realize,
customize, initialize, color, etc. There&#8217;s a list here:
<a class="reference external" href="https://wiki.ubuntu.com/EnglishTranslation/WordSubstitution">https://wiki.ubuntu.com/EnglishTranslation/WordSubstitution</a></p>
</div>
<div class="section" id="spellcheck">
<h3>Spellcheck<a class="headerlink" href="#spellcheck" title="Permalink to this headline">¶</a></h3>
<p>Please spellcheck documentation before merging it into master!</p>
</div>
<div class="section" id="commonly-used-terms">
<h3>Commonly used terms<a class="headerlink" href="#commonly-used-terms" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>CKAN</dt>
<dd>Should be written in ALL-CAPS.</dd>
<dt>email</dt>
<dd>Use email not e-mail.</dd>
<dt><a href="#id17"><span class="problematic" id="id18">|postgres|</span></a>, <a href="#id19"><span class="problematic" id="id20">|sqlalchemy|</span></a>, <a href="#id21"><span class="problematic" id="id22">|nginx|</span></a>, <a href="#id23"><span class="problematic" id="id24">|python|</span></a>, <a href="#id25"><span class="problematic" id="id26">|sqlite|</span></a>, <a href="#id27"><span class="problematic" id="id28">|javascript|</span></a>, etc.</dt>
<dd>These should always be capitalized as shown above (including capital first
letters for Python and Nginx even when they&#8217;re not the first word in a
sentence). <tt class="docutils literal"><span class="pre">doc/conf.py</span></tt> defines substitutions for each of these so you
don&#8217;t have to remember them, see <a class="reference internal" href="#sphinx-substitutions"><em>Substitutions</em></a>.</dd>
<dt>Web site</dt>
<dd>Two words, with Web always capitalized</dd>
<dt>frontend</dt>
<dd>Not front-end</dd>
<dt>command line</dt>
<dd>Two words, not commandline or command-line
(this is because we want to be like <a class="reference external" href="http://www.cryptonomicon.com/beginning.html">Neal Stephenson</a>)</dd>
<dt>CKAN config file or configuration file</dt>
<dd>Not settings file, ini file, etc. Also, the <strong>config file</strong> contains <strong>config
options</strong> such as <tt class="docutils literal"><span class="pre">ckan.site_id</span></tt>, and each config option is <strong>set</strong> to a
certain <strong>setting</strong> or <strong>value</strong> such as <tt class="docutils literal"><span class="pre">ckan.site_id</span> <span class="pre">=</span> <span class="pre">demo.ckan.org</span></tt>.</dd>
</dl>
</div>
<div class="section" id="section-titles">
<h3>Section titles<a class="headerlink" href="#section-titles" title="Permalink to this headline">¶</a></h3>
<p>Capitalization in section titles should follow the same rules as in normal
sentences: you capitalize the first word and any <a class="reference external" href="http://en.wikipedia.org/wiki/Proper_noun">proper nouns</a>.</p>
<p>This seems like the easiest way to do consistent capitalization in section
titles because it&#8217;s a capitalization rule that we all know already (instead of
inventing a new one just for section titles).</p>
<p>Right:</p>
<ul class="simple">
<li>Installing CKAN from package</li>
<li>Getting started</li>
<li>Command line interface</li>
<li>Writing extensions</li>
<li>Making an API request</li>
<li>You&#8217;re done!</li>
<li>Libraries available to extensions</li>
</ul>
<p>Wrong:</p>
<ul class="simple">
<li>Installing CKAN from Package</li>
<li>Getting Started</li>
<li>Command Line Interface</li>
<li>Writing Extensions</li>
<li>Making an API Request</li>
<li>You&#8217;re Done!</li>
<li>Libraries Available To Extensions</li>
</ul>
<p>For lots of examples of this done right, see
<a class="reference external" href="https://docs.djangoproject.com/en/1.5/contents/">Django&#8217;s table of contents</a>.</p>
<p>In Sphinx, use the following section title styles:</p>
<div class="highlight-python"><div class="highlight"><pre>===============
Top-level title
===============

------------------
Second-level title
------------------

Third-level title
=================

Fourth-level title
------------------
</pre></div>
</div>
<p>If you need more than four levels of headings, you&#8217;re probably doing something
wrong, but see:
<a class="reference external" href="http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#sections">http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#sections</a></p>
</div>
<div class="section" id="be-conversational">
<h3>Be conversational<a class="headerlink" href="#be-conversational" title="Permalink to this headline">¶</a></h3>
<p>Write in a friendly, conversational and personal tone:</p>
<ul class="simple">
<li>Use contractions like don&#8217;t, doesn&#8217;t, it&#8217;s etc.</li>
<li>Use &#8220;we&#8221;, for example <em>&#8220;We&#8217;ll publish a call for translations to the
ckan-dev and ckan-discuss mailing lists, announcing that the new
version is ready to be translated&#8221;</em> instead of <em>&#8220;A call for translations will
be published&#8221;</em>.</li>
<li>Refer to the reader personally as &#8220;you&#8221;, as if you&#8217;re giving verbal
instructions to someone in the room: <em>&#8220;First, you&#8217;ll need to do X. Then, when
you&#8217;ve done Y, you can start working on Z&#8221;</em> (instead of stuff like
<em>&#8220;First X must be done, and then Y must be done...&#8221;</em>).</li>
</ul>
</div>
<div class="section" id="write-clearly-and-concretely-not-vaguely-and-abstractly">
<h3>Write clearly and concretely, not vaguely and abstractly<a class="headerlink" href="#write-clearly-and-concretely-not-vaguely-and-abstractly" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.orwell.ru/library/essays/politics/english/e_polit/">Politics and the English Language</a>
has some good tips about this, including:</p>
<ol class="arabic simple">
<li>Never use a metaphor, simile, or other figure of speech which you are used
to seeing in print.</li>
<li>Never use a long word where a short one will do.</li>
<li>If it&#8217;s possible to cut out a word, always cut it out.</li>
<li>Never use the passive when you can be active.</li>
<li>Never use a foreign phrase, scientific word or jargon word if you can think
of an everyday English equivalent.</li>
</ol>
<p>This will make your meaning clearer and easier to understand, especially for
people whose first language isn&#8217;t English.</p>
</div>
<div class="section" id="facilitate-skimming">
<h3>Facilitate skimming<a class="headerlink" href="#facilitate-skimming" title="Permalink to this headline">¶</a></h3>
<p>Readers skim technical documentation trying to quickly find what&#8217;s
important or what they need, so break walls of text up into small, visually
identifiable pieces:</p>
<ul>
<li><p class="first">Use lots of <a class="reference external" href="http://sphinx-doc.org/rest.html#inline-markup">inline markup</a>:</p>
<div class="highlight-python"><div class="highlight"><pre>*italics*
**bold**
``code``
</pre></div>
</div>
<p>For code samples or filenames with variable parts, uses Sphinx&#8217;s
<a class="reference external" href="http://sphinx-doc.org/markup/inline.html#role-samp">:samp:</a>
and <a class="reference external" href="http://sphinx-doc.org/markup/inline.html#role-file">:file:</a>
directives.</p>
</li>
<li><p class="first">Use <a class="reference external" href="http://sphinx-doc.org/rest.html#lists-and-quote-like-blocks">lists</a>
to break up text.</p>
</li>
<li><p class="first">Use <tt class="docutils literal"><span class="pre">..</span> <span class="pre">note::</span></tt> and <tt class="docutils literal"><span class="pre">..</span> <span class="pre">warning::</span></tt>, see Sphinx&#8217;s
<a class="reference external" href="http://sphinx-doc.org/markup/para.html#paragraph-level-markup">paragraph-level markup</a>.</p>
<p>(<a href="#id29"><span class="problematic" id="id30">|restructuredtext|</span></a> actually supports lots more of these: <tt class="docutils literal"><span class="pre">attention</span></tt>,
<tt class="docutils literal"><span class="pre">error</span></tt>, <tt class="docutils literal"><span class="pre">tip</span></tt>, <tt class="docutils literal"><span class="pre">important</span></tt>, etc. but most Sphinx themes only style
<tt class="docutils literal"><span class="pre">note</span></tt> and <tt class="docutils literal"><span class="pre">warning</span></tt>.)</p>
</li>
<li><p class="first">Break text into short paragraphs of 5-6 sentences each max.</p>
</li>
<li><p class="first">Use section and subsection headers to visualize the structure of a page.</p>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
            <li class="right" style="margin-right: 10px">
              <a href="../genindex.html" title="General Index"
                 accesskey="I">index</a></li>
        <li><a href="../index.html">doc</a> &raquo;</li>
        <li><a href="#">Writing documentation</a></li>
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2014 GeoSolutions.
      Last updated on Aug 03, 2015.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>